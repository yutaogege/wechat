<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>我要报修</title>
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <link rel="stylesheet" type="text/css" href="css/wechat.css">
</head>

<body>
    <div>
        <header class="topBar">
            <a class="back" href="javascript:;">返回</a>
            <h2 class="topBar-title">我要报修</h2>
        </header>
        <form action="" id="form">
            <div class="contain">
                <div class="banner_wrap">
                    <img src="images/banner01.jpg">
                </div>
                <dl class="module">
                    <dt>
                        <h3 class="title">问题描述</h3>
                    </dt>
                    <dd class="feedback">
                        <textarea class="descript" id="feed-views" name="feed-views" placeholder="点击编辑问题描述"></textarea>
                    </dd>
                </dl>
                <dl class="module">
                    <dt>
                        <h3 class="title">使用次数(<span class="count">9</span>)</h3>
                    </dt>
                    <dd>
                        <div class="func-count">
                            <ul class="funcC">
                                <li class="funcC-cut"></li>
                                <li class="funcC-num">8</li>
                                <li class="funcC-add"></li>
                            </ul>
                            <span>使用</span>
                        </div>
                        <div class="else">
                            <span class="e-mid">或</span>
                        </div>
                        <div class="result">
                            <p class="no-result">没有次数？不要紧，点这里！</p>
                        </div>
                    </dd>
                </dl>
                <div class="do-repair">
                    <a href="javascript:;" class="btn">立即报修</a>
                </div>
            </div>
        </form>
    </div>
    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/validator/validator.js"></script>
    <script type="text/javascript" src="js/validator/local/zh_cn.js"></script>
    <script type="text/javascript">
    $(function() {
        $('.funcC').on('click', function(e) {
            var $cut = $('.funcC-cut')[0],
                $add = $('.funcC-add')[0],
                $val = $('.funcC-num').text() - 0,
                $count = $('.count').text() - 0;
            // 点击减号
            if (e.target == $cut) {
                if ($val == 0) {
                    return;
                }
                $val--;
            }
            // 点击加号
            else if (e.target == $add) {
                if ($val == $count) {
                    return;
                };
                $val++;
            }
            $('.funcC-num').text($val);
        })

    })
    $('#form').validator({
        stopOnError: true,
        focusCleanup: true,
        timely: 1,
        fields: {
            'feed-views': {
                rule: 'required',
                msg: {
                    required: '内容不能为空'
                }
            },
            'feed-contc': {
                rule: 'required;digits',
                msg: {
                    required: '请输入正确的联系方式',
                    digits: '请输入正确的联系方式'
                }
            }

        },
        valid: function(form) {
            console.log("验证通过");
        },
        invalid: function(form) {
            // 失败走这里
            console.log("失败");
        }
    }).on('click', 'a.btn', function(e) {
        $(e.delegateTarget).trigger("validate");
    })
    </script>
</body>

</html>
